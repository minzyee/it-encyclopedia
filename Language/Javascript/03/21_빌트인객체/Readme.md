# 빌트인 객체(Built-In Object)

## ❓ 빌트인 객체는 무엇인가?

빌트인 객체는 내장 객체를 의미하며,
브라우저의 자바스크립트 엔진에 내장되어 자바스크립트 실행 환경 또는 사용자의 환경에 상관없이 즉시 사용할 수 있는 객체를 의미한다.

<br>
<br>

### 자바스크립트 객체의 분류

자바스크립트 객체는 크게 3가지로 분류할 수 있다.

> **표준 빌트인 객체**

- ECMAScript 사양의 자바스크립트 실행 환경(브라우저 / node.js)에 관계없이 어디서나 모두 사용 가능한 공통 객체이다.
- 전역 객체의 프로퍼티로서 제공되므로 별도의 선언 없이 전역 변수처럼 언제나 참조 가능하다.

```javascript
// String 생성자 함수에 의한 String 객체 생성
let strObj = new String("Kim"); // // String {"Kim"}
console.log(typeof strObj);

// Array 생성자 함수에 의한 Array 객체(배열) 생성
let arr = new Array(1, 2, 3); // // (3) [1, 2, 3]
console.log(typeof arr);
```

<br>

> **호스트 객체**

- ECMAScript 사양에 정의되어 있지 않지만 자바스크립트 실행 환경에서 추가로 제공하는 객체를 말한다.
- 브라우저 환경에서는 DOM, BOM, Canvas, XMLHttpRequest, fetch, SVG, Web Component 등과 같은
  클라이언트 사이드 Web API를 호스트 객체로 제공하고, Node.js 환경에서는 Node.js 고유의 API를 호스트 객체로 제공한다.

<br>

> **사용자 정의 객체**

- 사용자 정의 객체는 표준 빌트인 객체와 호스트 객체처럼 기본 제공되는 객체가 아닌 사용자가 직접 직정의한 객체를 말한다.

<br>
<br>

### 생성자 함수 여부에 따른 표준 빌트인 객체의 종류

생성자 함수 객체는 호출로 인스턴스를 생성할 수 있다.

|                  | 생성자 함수 객체인 <br> 표준 빌트인 객체                                                                                                                                              | 생성자 함수 객체가 아닌 <br> 표준 빌트인 객체 |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------- |
| 빌트인 객체 종류 | - Object <br> - String <br> - Number <br> - Boolean <br> - Symbol <br> - Date <br> - RegExp <br> - Array <br> - Map/Set <br> - Function <br> - Promise <br> - Proxy <br> - Error <br> | - Math <br> - Reflect <br> - Json             |
| 제공하는 메서드  | - 프로퍼티타입 메서드 <br> - 정적 메서드                                                                                                                                              | - 정적 메서드                                 |

<br>
<br>

생성자 함수인 표준 빌트인 객체(예를 들면 String, Number, Object... 등)가 생성한 인스턴스의 프로토타입은<br>
표준 빌트인 객체의 prototype 프로퍼티에 바인딩된 객체(=String.prototype) 이다.

```javascript
// String 생성자 함수에 의한 String 인스턴스(객체) 생성
const strObj = new String("Kim"); // String {"Kim"}

// String 생성자 함수를 통해 생성한 strObj 객체의 프로토타입은 String.prototype 이다.
// Object.getPrototypeOf(obj); -> 인스턴스 객체인 obj의 [[Prototype]] 내부 슬롯을 반환한다.
console.log(Object.getPrototypeOf(strObj) === String.prototype);
```

<br>
<br>

## ❓ `래퍼 객체(wrapper object)`는 무엇인가?

래퍼 객체는 문자열, 숫자, 불리언과 같은 원시값을 객체처럼 마침표 표기법으로 접근 하는 과정에서 자바스크립트 엔진이 일시적으로 원시값을 연관된 객체로 변환해주는 `임시 객체`를 말한다.

즉, 원시값을 객체처럼 사용하게 되면 자바스크립트 엔진은 암묵적으로 연관된 객체를 생성하고, 생성된 객체로 프로퍼티에 접근하거나 메서드를 호출하고 다시 원시값으로 되돌린다.

<br>

예를 들어, `str.length` 와 같이 문자열에 대해 마침표 표기법으로 접근하면, 그 순간 래퍼 객체인 String 생성자 함수의 인스턴스가 생성되고 `기존 문자열은 래퍼 객체의 [[StringData]] 내부 슬롯에 할당`된다.

이때 문자열 래퍼 객체인 String 생성자 함수의 인스턴스는 String.prototype 의 메서드를 상속받아서 `str.toUpperCase()` 와 같이 사용할 수 있다.

```javascript
const str = "hello";

// 원시 타입인 문자열이 래퍼 객체인 String 인스턴스로 변환된다.
// 이때 식별자 str의 값인 hello는 래퍼 객체의 [[StringData]] 내부 슬롯에 할당 된다.
console.log(str.length); // 5
console.log(str.toUpperCase()); // HELLO

// 래퍼 객체로 프로퍼티에 접근하거나 메서드를 호출한 후, 다시 원시값으로 되돌린다.
console.log(typeof str, str); // string hello
```

그 후에 래퍼 객체의 처리가 종료되면, 식별자는 다시 원래의 문자열인 `래퍼 객체의 [[StringData]] 내부 슬롯에 할당된 원시값`을 가지고, <br>
래퍼 객체는 더이상 아무도 참조하지 않는 상태이기 때문에 가비지 컬렉션의 대상이 된다.

문자열, 숫자, 불리언, 심벌 이외의 원시값인 undefined, null 은 래퍼 객체를 생성하지 않기 때문에 undefined와 null을 객체처럼 사용하면 에러가 발생한다.

ES6에서 새롭게 도입된 심벌도 래퍼 객체를 생성하지만, 일반적인 원시값과는 달리 리터럴 표기법으로 생성할 수 없고
Symbol 함수를 통해 생성해야 하기 때문에 다른 원시값과는 차이가 있다. 심벌에 대해서는 33장에서 알아보자.

<br>
<br>

## ❓ `전역 객체(global object)`는 무엇인가?

- 코드가 실행되기 이전 단계에 자바스크립트 엔진에 의해 어떤 객체보다도 먼저 생성되는 특수한 객체이다.
- 어떤 객체에도 속하지 않은 최상위 객체이다.
- 계층적 구조상 표준 빌트인 객체와 호스트 객체를 프로퍼티로 소유한다.
- 전역 객체는 개발자가 의도적으 생성할 수 없으며, 전역 객체를 생성할 수 있는 생성자 함수가 제공되지 않는다.
- 전역 객체의 프로퍼티를 참조할 때 window(또는 global)를 생략할 수 있다.
- 전역 객체는 자바스크립트 환경에 따라 지칭하는 이름이 다르다.
  - 브라우저 환경: window(또는 self, this, frames)
  - Node.js 환경: global

```shell
globalThis

- ES11에 도입되었으며 브라우저 환경과 Node.js 환경에서 전역 객체를 가리키던 다양한 식별자를 통일한 식별자
- `globalThis`는 표준 사양이기 때문에 ECMAScript 표준 사양을 준수하는 모든 환경에서 사용 가능
```

<br>
<br>

### 전역 객체의 프로퍼티와 메서드

전역 객체의 프로퍼티와 메서드는 전역 객체를 가리키는 식별자, 즉 window나 global을 생략하여 참조 / 호출할 수 있으므로
전역 변수와 전역 함수처럼 사용할 수 있다.

<br>

> 빌트인 전역 프로퍼티(built-in global property)

- 전역 객체의 프로퍼티를 의미한다.
- 주로 애플리케이션 전역에서 사용하는 값을 제공한다.
  - Infinity: Infinity 프로퍼티는 무한대를 나타내는 숫자값 Infinity를 갖는다.
  - NaN: NaN 프로퍼티는 Not-a-Number를 나타내는 숫자값 NaN을 가지며, Number.NaN 프로퍼티와 같다.
  - undefined: undefined 프로퍼티는 원시 타입 undefined를 값으로 갖는다.

<br>

> 빌트인 전역 함수(built-in global function)

애플리케이션 전역에서 호출할 수 있는 빌트인 함수로서 전역 객체의 메서드이다.

| 함수 종류                               | 특징                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| eval                                    | 자바스크립트 코드를 나타내는 문자열을 인수로 전달받고, 기존의 스코프를 런타임에 동적으로 수정한다. <br><br> - 인수로 전달받은 문자열 코드가 표현식 일때: eval 함수는 문자열 코드를 런타임에 평가해서 값을 생성함 <br> - 인수로 전달받은 문자열 코드가 표현식이 아닌 문일 때: eval 함수는 문자열 코드를 런타임에 실행함 <br> - 인수로 전달받은 문자열 코드가 여러개의 문으로 이루어져 있을 때: 모든 문을 실행한 뒤, 마지막 결과값을 반환 |
| Infinite                                | 전달받은 인수가 정상적인 유한수인지 검사 후, 유한수이면 true, 무한수이면 false를 반환한다.                                                                                                                                                                                                                                                                                                                                              |
| isNaN                                   | 전달받은 인수가 NaN인지 검사하여 그 결과를 불리언 타입으로 반환하고, 만일 숫자가 아닌 경우 숫자로 타입 변환 후 검사를 수행한다.                                                                                                                                                                                                                                                                                                         |
| parseFloat                              | 전달받은 문자열 인수를 부동 소수점 숫자(= 실수)로 해석하여 반환한다.                                                                                                                                                                                                                                                                                                                                                                    |
| parseInt                                | 전달받은 문자열 인수를 정수로 해석하여 반환한다.                                                                                                                                                                                                                                                                                                                                                                                        |
| encodeURI / decodeURI                   | - encodeURI: 완전한 URI를 문자열로 전달받아 이스케이프 처리를 위해 인코딩한다. <br> - decodeURI: 인코딩된 URI를 인수로 전달받아 이스케이프 처리 이전으로 디코딩한다.                                                                                                                                                                                                                                                                    |
| encodeURIComponent / decodeURIComponent | - encodeURIComponent: URI 구성 요소를 인수로 전달받아 인코딩한다. <br> - decodeURIComponent: 매개변수로 전달된 URI 구성 요소를 디코딩한다.                                                                                                                                                                                                                                                                                              |

<br>

> 암묵적 전역

선언하지 않은 식별자에 대해 값을 할당하면 암묵적으로 전역 객체에 프로퍼티를 동적으로 생성하여 전역 번수처럼 동작하는 것을 의미한다.<br>
아래의 예시에서 y는 변수 선언 없이 전역 객체의 프로퍼티에 추가되었을 뿐이지, 변수가 아닌 프로퍼티이기 때문에 변수 호이스팅이 발생하지 않고, delete 연산자로 삭제가 가능하다.

<br>

```javascript
// 전역 변수 x는 호이스팅이 발생한다.
console.log(x); // undefined

// 전역 변수가 아닌 단지 전역 객체의 프로퍼티인 y는 호이스팅이 발생하지 않는다.
console.log(y); // ReferenceError: y is not defined

var x = 10; // 전역 변수

function foo() {
	// 선언하지 않은 식별자에 값을 할당
	y = 20; // window.y = 20;
}

foo();

// 선언하지 않은 식별자 y를 전역에서 참조할 수 있다.
console.log(x + y); // 30
```

<br>

- delete 연산자로 삭제되는 프로퍼티

```javascript
var x = 10; // 전역 변수

function foo() {
	// 선언하지 않은 식별자에 값을 할당
	y = 20; // window.y = 20;
	console.log(x + y);
}

foo(); // 30

console.log(window.x); // 10
console.log(window.y); // 20

delete x; // 전역 변수는 삭제되지 않는다.
delete y; // 프로퍼티는 삭제된다.

console.log(window.x); // 10
console.log(window.y); // undefined
```
